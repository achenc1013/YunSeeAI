# 🔒 安全运维模块 - 5分钟快速指南

## 🚀 快速开始

### 1. 启动系统
```bash
npm start
```

### 2. 进行安全检查

```
You: 检查系统安全
```

或者：

```
You: 安全审计
You: 有没有攻击？
You: 分析系统日志
You: 检测暴力破解
```

**就这么简单！** 🎉

---

## 💬 支持的查询方式

### 中文查询（10+种）

```
✅ "检查系统安全"
✅ "安全审计"
✅ "系统安全吗？"
✅ "有没有攻击？"
✅ "检测暴力破解"
✅ "分析日志"
✅ "查看配置安全"
✅ "是否有入侵？"
✅ "封禁攻击IP"
✅ "服务器安全检查"
```

### English

```
✅ "Security audit"
✅ "Check system security"
✅ "Any attacks?"
✅ "Analyze logs"
✅ "Is my system secure?"
```

---

## 📊 能检测什么？

### ✅ 配置安全问题

- SSH密码登录（应禁用）
- SSH Root登录（应禁止）
- 防火墙未启用
- RDP远程桌面开启

### ✅ 暴力破解攻击

- SSH登录攻击
- FTP登录攻击
- SMB/Samba攻击
- Windows登录失败

### ✅ 自动防护

- 自动识别攻击IP
- 自动封禁可疑IP
- 防火墙规则自动配置

---

## 📋 快速示例

### 示例1: Windows系统

```
You: 检查系统安全

AI输出:
🔒 系统安全审计报告

系统类型: Windows
扫描时间: 2025-11-04 15:30:00

⚠️  配置安全问题 (1):

  🟡 中危 (1):
     • Remote Desktop: Remote Desktop is enabled
       建议: Ensure RDP is secured with strong passwords

💡 安全建议:
  • Found 1 medium-severity issue(s). Should be addressed soon.

🤖 YunSeeAI 分析:
系统发现1个中危问题。建议加强RDP安全配置，使用强密码。
```

### 示例2: Linux系统（有攻击）

```
You: 有没有攻击？

AI输出:
🔒 系统安全审计报告

系统类型: Ubuntu

⚠️  配置安全问题 (2):

  🔴 高危 (1):
     • Firewall: UFW firewall is inactive
       建议: Enable firewall with 'sudo ufw enable'

  🟡 中危 (1):
     • SSH: Password authentication is enabled

🚨 攻击检测:

  📊 SSH暴力破解尝试:
     总失败次数: 150
     可疑IP (3):
       🔴 203.0.113.45 - 85次失败
       🔴 198.51.100.23 - 42次失败
       🟡 192.0.2.100 - 23次失败

✅ 自动封禁 (2个IP):

  🛡️  203.0.113.45
     失败次数: 85
     封禁方式: UFW

  🛡️  198.51.100.23
     失败次数: 42
     封禁方式: UFW

💡 安全建议:
  • Automatically banned 2 suspicious IP(s)

🤖 YunSeeAI 分析:
检测到SSH暴力破解攻击！已自动封禁2个攻击IP。
建议立即启用防火墙并禁用SSH密码登录。
```

---

## ⚠️ 权限要求

### Linux
```bash
# 需要sudo权限读取日志和封禁IP
sudo npm start
```

### Windows
```powershell
# 需要管理员权限
# 右键 → 以管理员身份运行 PowerShell
npm start
```

---

## 🎯 使用场景

### 场景1: 每日安全检查
```
每天执行: "检查系统安全"
```

### 场景2: 发现异常登录
```
查询: "有没有攻击？"
→ 自动检测并封禁
```

### 场景3: 新服务器上线
```
上线前: "安全审计"
→ 发现配置问题
→ 修复后再上线
```

---

## 💡 最佳实践

### 1. 定期检查
```
建议: 每天至少1次
命令: "检查系统安全"
```

### 2. 及时处理高危问题
```
优先级: 🔴 高危 > 🟡 中危 > 🔵 低危
```

### 3. 关注攻击趋势
```
如果频繁检测到攻击:
→ 修改SSH端口
→ 禁用密码登录
→ 启用fail2ban
```

---

## 🛠️ 常见问题

### Q: 为什么需要sudo？
**A**: 需要读取系统日志和配置防火墙

### Q: 会自动封禁所有失败IP吗？
**A**: 只封禁失败次数≥5次的公网IP，跳过内网IP

### Q: 封禁是永久的吗？
**A**: 当前版本是永久封禁，可手动解除：
```bash
# UFW
sudo ufw delete deny from IP地址

# iptables
sudo iptables -D INPUT -s IP地址 -j DROP

# Windows
netsh advfirewall firewall delete rule name="Block_IP"
```

### Q: 支持哪些日志？
**A**: 
- Linux: /var/log/auth.log, /var/log/secure
- Windows: Security Event Log (Event ID 4625)
- FTP: vsftpd.log, proftpd.log
- SMB: log.smbd

---

## 📚 更多信息

- **详细文档**: [安全运维模块完整文档.md](安全运维模块完整文档.md)
- **功能总览**: [YunSeeAI功能总览.md](YunSeeAI功能总览.md)

---

## 🎊 开始使用

```bash
# 1. 启动系统
npm start

# 2. 输入查询
You: 检查系统安全

# 3. 查看结果并采取行动
```

**就是这么简单！** 🚀

---

**YunSeeAI v2.0.0**  
让安全运维变得简单智能 🔒

**3大核心能力：**
- 🔍 配置审计
- 🚨 攻击检测
- 🛡️ 自动封禁



