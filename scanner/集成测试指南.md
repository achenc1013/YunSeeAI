# YunSeeAI 扫描功能集成测试指南

## ✅ 集成完成！

扫描模块已成功集成到你的YunSeeAI CLI中！现在AI可以自动识别并执行扫描请求。

## 🚀 立即测试

### 1. 启动YunSeeAI

```powershell
npm start
```

### 2. 测试扫描命令

在CLI中输入以下任意一条命令：

#### 测试端口扫描

```
请告诉我 http://example.com 开放了哪些端口？
```

```
What ports are open on scanme.nmap.org?
```

```
扫描 example.com 的端口
```

#### 测试指纹识别

```
我想知道 https://github.com 用的什么框架
```

```
What framework does https://example.com use?
```

```
请检测 https://www.baidu.com 使用的技术栈
```

#### 测试完整扫描

```
扫描 example.com
```

```
Scan github.com for me
```

```
全面检查 google.com
```

## 🎯 预期效果

当你输入扫描请求后，你会看到：

1. **🔍 检测提示**
   ```
   🔍 检测到扫描请求，正在执行扫描...
      目标: example.com
      类型: port
   ```

2. **✓ 扫描完成**
   ```
   ✓ 扫描完成！
   
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   📊 扫描结果:
   
   Port Scan:
     Target IP: 93.184.216.34
     Open Ports: 2 out of 20 scanned
     Detected open ports:
       - Port 80 (HTTP): open
       - Port 443 (HTTPS): open
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
   ```

3. **🤖 AI分析**
   ```
   🤖 YunSeeAI 分析:
   [AI会分析扫描结果并提供安全建议]
   ```

## 🔧 工作原理

### 自动检测机制

系统会自动检测输入中的关键词：

**中文关键词**：
- 扫描、端口、框架、技术、网站、开放

**英文关键词**：
- scan, port, ports, framework, technology, fingerprint, website, open, service

### 处理流程

```
用户输入
    ↓
关键词检测
    ↓
意图解析（提取目标）
    ↓
执行扫描（Python工具）
    ↓
格式化结果
    ↓
AI分析总结
    ↓
展示给用户
```

## 📝 测试清单

- [ ] 端口扫描（中文）
- [ ] 端口扫描（英文）
- [ ] 指纹识别（中文）
- [ ] 指纹识别（英文）
- [ ] 完整扫描
- [ ] 无效目标处理
- [ ] 扫描失败处理
- [ ] AI分析质量

## 🐛 故障排除

### 问题1：Python未找到

**症状**：提示 "Failed to start Python process"

**解决**：
1. 确认Python已安装：`python --version`
2. 如果使用`python3`，修改 `scanner/scanner-client.js`:
   ```javascript
   const pythonProcess = spawn('python3', [scriptPath, ...args]);
   ```

### 问题2：扫描超时

**症状**：扫描长时间无响应

**解决**：
- 检查网络连接
- 尝试扫描更快的目标（如 example.com）
- 增加超时时间（在代码中修改）

### 问题3：AI没有识别扫描请求

**症状**：AI只是回复文字，没有执行扫描

**解决**：
- 确保使用了关键词（扫描、端口、框架等）
- 明确指定目标（URL或域名）
- 示例：`扫描 example.com` 而不是 `帮我扫描一下`

### 问题4：权限错误

**症状**：某些端口扫描失败

**解决**：
- 以管理员身份运行PowerShell
- 或只扫描常见端口

## 🎓 进阶用法

### 自定义扫描提示

你可以尝试更自然的表达：

```
帮我看看 github.com 开放了什么服务
检查一下 google.com 用的什么技术
分析 example.com 的安全性
```

### 结合安全咨询

扫描完成后，你可以继续提问：

```
这些端口有安全风险吗？
应该关闭哪些端口？
如何加固这个配置？
```

AI会基于之前的扫描结果继续对话。

## 📊 示例对话

```
你: 请告诉我 http://example.com 开放了哪些端口？

🔍 检测到扫描请求，正在执行扫描...
   目标: example.com
   类型: port

✓ 扫描完成！

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 扫描结果:

Port Scan:
  Target IP: 93.184.216.34
  Open Ports: 2 out of 20 scanned
  Detected open ports:
    - Port 80 (HTTP): open
    - Port 443 (HTTPS): open
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🤖 YunSeeAI 分析:
根据扫描结果，example.com 开放了两个标准的Web服务端口：

1. **端口 80 (HTTP)** - 这是标准的Web服务端口
2. **端口 443 (HTTPS)** - 安全的Web服务端口

安全建议：
- ✓ 开放端口数量合理，只有必要的Web服务端口
- ✓ 提供了HTTPS支持，这是良好的安全实践
- 建议：确保所有流量都重定向到HTTPS以加强安全性

整体来看，这是一个标准的Web服务器配置，没有发现明显的安全隐患。

你: 那我应该检查什么？

🤖 YunSeeAI:
建议进行以下检查...
[AI继续提供建议]
```

## 🎉 恭喜！

你的YunSeeAI现在具备了智能扫描功能！AI可以：

✅ 自动识别扫描请求
✅ 执行实际扫描操作
✅ 分析扫描结果
✅ 提供安全建议
✅ 支持中英文交互

现在就试试吧！输入 `npm start` 启动，然后尝试扫描一个目标！

---

**需要帮助？**
- 查看 `scanner/README.md` 了解详细API
- 查看 `scanner/使用指南.md` 了解更多用法
- 运行 `node scanner/test-scanner.js` 测试扫描功能

